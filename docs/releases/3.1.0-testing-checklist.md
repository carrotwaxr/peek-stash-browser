# v3.1.0 Release Testing Checklist

**Testing Version:** v3.1.0-beta.10
**Previous Stable:** v3.0.0

This checklist covers all changes from v3.0.x through v3.1.0-beta.10.

---

## üîí Critical Security Fix

- [ ] **Password reset blocked after setup** - After completing setup, calling `/api/auth/first-time-password` returns 403

---

## üöÄ Major Features

### Scene URLs Display (#195)
- [ ] Scene detail panel shows URLs (if present in Stash)
- [ ] URLs display with favicon for known sites
- [ ] Director field displays if present

### Carousel "See More" Links (#192)
- [ ] Home carousels have "See More" button
- [ ] Clicking "See More" navigates to filtered scene list
- [ ] Custom carousels include "See More" with correct filters
- [ ] Continue Watching carousel has "See More" link

### Proxy Authentication (#224)
- [ ] `PROXY_AUTH_HEADER` environment variable works for reverse proxy auth
- [ ] Normal authentication still works when not using proxy auth

### Soft-Delete Entities (#232)
- [ ] Entities removed from Stash are soft-deleted (not hard-deleted)
- [ ] Soft-deleted entities don't appear in browse
- [ ] Re-adding entity in Stash restores it in Peek

---

## üîß Performance & Scalability

### Pre-Computed Exclusions (#228)
- [ ] Hidden items don't appear in scene/performer/etc. lists
- [ ] Restriction-filtered content is excluded
- [ ] Empty entities (no scenes) can be excluded via settings
- [ ] Hiding/unhiding an item updates immediately
- [ ] Admin can trigger exclusion recompute from Server Settings

### ImageQueryBuilder (#231)
- [ ] Images page loads and filters correctly
- [ ] Gallery images paginate properly
- [ ] Random sort works on images
- [ ] Image exclusions (hidden galleries) work

### Sync Scalability (#220)
- [ ] Large libraries (50k+ scenes) sync without timeout
- [ ] Incremental sync works after initial full sync
- [ ] Sync doesn't re-sync unchanged entities

### Scene Tag Inheritance (#227)
- [ ] Scenes inherit tags from performers/studios
- [ ] Filtering by inherited tags works
- [ ] Inherited tags display differently in UI (if applicable)

### Image Gallery Inheritance (#226)
- [ ] Images inherit metadata from parent gallery
- [ ] Gallery performer/tag info shows on images

---

## üêõ Bug Fixes

### Sync Timestamp Fixes (#200, #202-#208)
- [ ] Incremental sync only fetches changed entities
- [ ] No infinite re-sync loops
- [ ] Sync works across timezone differences with Stash

### Random Sort Fix (#203)
- [ ] Random sort produces good distribution
- [ ] Pagination maintains order with same seed
- [ ] Refresh gives new random order

### Large Exclusion Sets (#204)
- [ ] Works with 10k+ hidden items without SQL error

### Gallery Detail Parity (#215)
- [ ] Gallery lightbox shows performer/tag info
- [ ] Image metadata matches gallery view

### Sync Timestamp Precision (#214)
- [ ] No duplicate syncs of same content

### Playlist User Data (#217)
- [ ] Playlist page shows Peek ratings (not Stash ratings)
- [ ] Favorite status reflects Peek data

### Chunked Image Queries (#222)
- [ ] Large galleries (1000+ images) load correctly
- [ ] Cross-page lightbox navigation works

---

## üé® UI Improvements

### Detail Page Image Tabs (#216)
- [ ] Performer/Studio/Tag detail pages show image counts
- [ ] Image counts include inherited images

### Playlist/Watch History Previews (#219)
- [ ] Playlist items show animated preview on hover
- [ ] Watch history items show animated preview on hover

### Request Cancellation (#213)
- [ ] Navigating away cancels pending requests
- [ ] No stale data from previous searches

---

## üìù Documentation & Developer Experience

### API Documentation Generator (#237)
- [ ] `npm run generate-api-docs` works
- [ ] Generated docs appear at /development/api-reference/

### API Types (#234-236)
- [ ] TypeScript types for all API endpoints
- [ ] No type errors in server build

---

## üîÑ Database Migration

### Auto-Sync After Migration (#233)
- [ ] Fresh install triggers full sync automatically
- [ ] Upgrading from 3.0.x triggers sync for new fields

---

## üìã Regression Tests

### Core Functionality
- [ ] Login/logout works
- [ ] Scene browsing and filtering
- [ ] Performer/Studio/Tag/Group/Gallery browsing
- [ ] Scene playback (direct and transcoded)
- [ ] Playlists CRUD
- [ ] Custom carousels CRUD
- [ ] Rating and favoriting entities
- [ ] Watch history tracking
- [ ] Image viewing and O-counter

### Search & Filters
- [ ] Text search
- [ ] Performer filter
- [ ] Studio filter
- [ ] Tag filter (including inherited)
- [ ] Date filters
- [ ] Duration filters
- [ ] Resolution filters
- [ ] Sort options (including random)

### Settings
- [ ] User settings save/load
- [ ] Server settings (admin only)
- [ ] Custom themes

---

## Environment Notes

**Test Environment:**
- Platform: Unraid
- Stash Version: ___
- Library Size: ___ scenes, ___ performers
- Browser: ___

**Issues Found:**
<!-- Document any issues here during testing -->

