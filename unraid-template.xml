<?xml version="1.0"?>
<Container version="2">
  <Name>Peek-Stash-Browser</Name>
  <Repository>carrotwaxr/peek-stash-browser:latest</Repository>
  <Registry>https://hub.docker.com/r/carrotwaxr/peek-stash-browser/</Registry>
  <Network>bridge</Network>
  <MyIP/>
  <Shell>bash</Shell>
  <Privileged>false</Privileged>
  <Support>https://github.com/carrotwaxr/peek-stash-browser/issues</Support>
  <Project>https://github.com/carrotwaxr/peek-stash-browser</Project>
  <Overview>
    Peek Stash Browser is a modern web application for browsing and managing your Stash media library. 
    Features include authentication, advanced filtering, sorting, and a beautiful responsive interface.
    
    This is a single-container solution that includes:
    - Frontend web interface (React)
    - Backend API server (Node.js/Express)  
    - SQLite database for user data and preferences
    - Video transcoding with FFmpeg for HLS streaming
    
    Requirements:
    - Existing Stash server with GraphQL API enabled
    - Media files accessible via unRAID shares
  </Overview>
  <Category>MediaApp:Video</Category>
  <WebUI>http://[IP]:[PORT:6969]</WebUI>
  <TemplateURL>https://raw.githubusercontent.com/carrotwaxr/peek-stash-browser/main/unraid-template.xml</TemplateURL>
  <Icon>https://raw.githubusercontent.com/carrotwaxr/peek-stash-browser/main/docs/icon.png</Icon>
  <ExtraParams/>
  <PostArgs/>
  <CPUset/>
  <DateInstalled/>
  <DonateText/>
  <DonateLink/>
  <Description>
    Peek Stash Browser provides a modern, responsive web interface for your Stash media library with advanced filtering and sorting capabilities.
  </Description>
  <Networking>
    <Mode>bridge</Mode>
    <Publish>
      <Port>
        <HostPort>6969</HostPort>
        <ContainerPort>80</ContainerPort>
        <Protocol>tcp</Protocol>
      </Port>
    </Publish>
  </Networking>
  <Data>
    <Volume>
      <HostDir>/mnt/user/media</HostDir>
      <ContainerDir>/app/media</ContainerDir>
      <Mode>ro</Mode>
    </Volume>
    <Volume>
      <HostDir>/mnt/user/appdata/peek-stash-browser/data</HostDir>
      <ContainerDir>/app/data</ContainerDir>
      <Mode>rw</Mode>
    </Volume>
    <Volume>
      <HostDir>/mnt/user/appdata/peek-stash-browser/tmp</HostDir>
      <ContainerDir>/app/tmp</ContainerDir>
      <Mode>rw</Mode>
    </Volume>
  </Data>
  <Environment>
    <Variable>
      <Value>http://[IP]:9999/graphql</Value>
      <Name>STASH_URL</Name>
      <Mode/>
    </Variable>
    <Variable>
      <Value>your-stash-api-key</Value>
      <Name>STASH_API_KEY</Name>
      <Mode/>
    </Variable>
    <Variable>
      <Value>file:/app/data/peek-stash-browser.db</Value>
      <Name>DATABASE_URL</Name>
      <Mode/>
    </Variable>
    <Variable>
      <Value>production</Value>
      <Name>NODE_ENV</Name>
      <Mode/>
    </Variable>
  </Environment>
  <Labels/>
  <Config Name="Web UI Port" Target="80" Default="6969" Mode="tcp" Description="Web interface port (single container serves everything)" Type="Port" Display="always" Required="true" Mask="false">6969</Config>
  <Config Name="Media Directory" Target="/app/media" Default="/mnt/user/media" Mode="ro" Description="Path to your media files (read-only)" Type="Path" Display="always" Required="true" Mask="false">/mnt/user/media</Config>
  <Config Name="Database Directory" Target="/app/data" Default="/mnt/user/appdata/peek-stash-browser/data" Mode="rw" Description="SQLite database storage" Type="Path" Display="always" Required="true" Mask="false">/mnt/user/appdata/peek-stash-browser/data</Config>
  <Config Name="Temp Directory" Target="/app/tmp" Default="/mnt/user/appdata/peek-stash-browser/tmp" Mode="rw" Description="Temporary files for video transcoding" Type="Path" Display="always" Required="true" Mask="false">/mnt/user/appdata/peek-stash-browser/tmp</Config>
  <Config Name="Stash URL" Target="STASH_URL" Default="http://[IP]:9999/graphql" Mode="" Description="Your Stash GraphQL endpoint URL" Type="Variable" Display="always" Required="true" Mask="false">http://[IP]:9999/graphql</Config>
  <Config Name="Stash API Key" Target="STASH_API_KEY" Default="your-api-key" Mode="" Description="Your Stash API key for authentication" Type="Variable" Display="always" Required="true" Mask="true">your-api-key</Config>
  <Config Name="JWT Secret" Target="JWT_SECRET" Default="change-this-to-a-secure-random-string" Mode="" Description="Secret key for JWT token signing (change to a secure random string)" Type="Variable" Display="always" Required="true" Mask="true">change-this-to-a-secure-random-string</Config>
  <Config Name="Secure Cookies" Target="SECURE_COOKIES" Default="false" Mode="" Description="Enable secure cookies (set to 'true' only if using HTTPS)" Type="Variable" Display="advanced" Required="false" Mask="false">false</Config>
  <Config Name="Database URL" Target="DATABASE_URL" Default="file:/app/data/peek-stash-browser.db" Mode="" Description="SQLite database file path" Type="Variable" Display="advanced" Required="false" Mask="false">file:/app/data/peek-stash-browser.db</Config>
  <Config Name="Environment" Target="NODE_ENV" Default="production" Mode="" Description="Node.js environment" Type="Variable" Display="advanced" Required="false" Mask="false">production</Config>
</Container>